'use strict';define("{seajs}/plugin-combo",[],function(){function l(e){var d={__KEYS:[]};f.forEach(e,function(a){a=a.replace("://","__").split("/");var b=d;f.forEach(a,function(a){b[a]||(b[a]={__KEYS:[]},b.__KEYS.push(a));b=b[a]})});var g=[];f.forEach(d.__KEYS,function(a){var b=a;a=d[a];for(var c=a.__KEYS;1===c.length;)b+="/"+c[0],a=a[c[0]],c=a.__KEYS;c.length&&g.push([b.replace("__","://"),m(a)])});return g}function m(e){var d=[];f.forEach(e.__KEYS,function(g){var a=m(e[g]);a.length?f.forEach(a,
function(a){d.push(g+"/"+a)}):d.push(g)});return d}function n(e){var d=h.comboSyntax||["??",","];f.forEach(e,function(g){var a=g[0]+"/",b=[],c={};f.forEach(g[1],function(a){var b;b=a.lastIndexOf(".");(b=0<=b?a.substring(b):"")&&(c[b]||(c[b]=[])).push(a)});for(var e in c)c.hasOwnProperty(e)&&b.push(c[e]);f.forEach(b,function(b){var c=a+d[0]+b.join(d[1]);if(2E3<c.length)throw Error("The combo url is too long: "+c);f.forEach(b,function(b){j[a+b]=c})})})}var k=seajs.pluginSDK,p=k.Module.STATUS,f=k.util,
h=k.config,j={},q=seajs.cache;seajs.debug?seajs.log("Combo is turned off in debug mode"):(seajs.on("load",function(e){var d=[],g=h.comboExcludes;f.forEach(e,function(a){var b=q[a];if(b=!b||b.status<p.LOADING)if(b=!g||!g.test(a))var c=h.comboSyntax||["??",","],b=c[0],c=c[1],b=!(b&&0<a.indexOf(b)||c&&0<a.indexOf(c));b&&d.push(a)});1<d.length&&n(l(d))}),seajs.on("fetch",function(e){var d=e.uri;e.uri=j[d]||d}));f.toComboPaths=l;f.toComboHash=n;f.comboHash=j});seajs.use("{seajs}/plugin-combo");
